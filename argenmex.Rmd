---
title: "Text mining bibliométrico"
output: html_notebook
---

```{r}
library(tidyverse)
```


###Data Wrangling

Importando archivos desde la carpeta del rígido:

```{r}
load ("C:/Users/User/Desktop/Seba/Datasets enraizados. No tocar ni mover/pict_sandra/M_Loc_Envi_Xmex/M_Loc_Envi_Xmex_2007.RData")
```

El chunk de arriba importa todos los data.frames...

```{r}
ls()
```

Son 40 data.frames. Creo un id (identificador) para cada dataframe:

```{r}

#Econ. Arg.
A_Loc_Econ_Xarg_2007 <- mutate(A_Loc_Econ_Xarg_2007,
identificador = 1)

A_Loc_Econ_Xarg_2008 <- mutate(A_Loc_Econ_Xarg_2008,
identificador = 2)

A_Loc_Econ_Xarg_2009 <- mutate(A_Loc_Econ_Xarg_2009,
identificador = 3)

A_Loc_Econ_Xarg_2010 <- mutate(A_Loc_Econ_Xarg_2010,
identificador = 4)

A_Loc_Econ_Xarg_2011 <- mutate(A_Loc_Econ_Xarg_2011,
identificador = 5)

A_Loc_Econ_Xarg_2012 <- mutate(A_Loc_Econ_Xarg_2012,
identificador = 6)

A_Loc_Econ_Xarg_2013 <- mutate(A_Loc_Econ_Xarg_2013,
identificador = 7)

A_Loc_Econ_Xarg_2014 <- mutate(A_Loc_Econ_Xarg_2014,
identificador = 8)

A_Loc_Econ_Xarg_2015 <- mutate(A_Loc_Econ_Xarg_2015,
identificador = 9)

A_Loc_Econ_Xarg_2016 <- mutate(A_Loc_Econ_Xarg_2016,
identificador = 10)

#Envi Arg.
A_Loc_Envi_Xarg_2007 <- mutate(A_Loc_Envi_Xarg_2007,
identificador = 11)

A_Loc_Envi_Xarg_2008 <- mutate(A_Loc_Envi_Xarg_2008,
identificador = 12)

A_Loc_Envi_Xarg_2009 <- mutate(A_Loc_Envi_Xarg_2009,
identificador = 13)

A_Loc_Envi_Xarg_2010 <- mutate(A_Loc_Envi_Xarg_2010,
identificador = 14)

A_Loc_Envi_Xarg_2011 <- mutate(A_Loc_Envi_Xarg_2011,
identificador = 15)

A_Loc_Envi_Xarg_2012 <- mutate(A_Loc_Envi_Xarg_2012,
identificador = 16)

A_Loc_Envi_Xarg_2013 <- mutate(A_Loc_Envi_Xarg_2013,
identificador = 17)

A_Loc_Envi_Xarg_2014 <- mutate(A_Loc_Envi_Xarg_2014,
identificador = 18)

A_Loc_Envi_Xarg_2015 <- mutate(A_Loc_Envi_Xarg_2015,
identificador = 19)

A_Loc_Envi_Xarg_2016 <- mutate(A_Loc_Envi_Xarg_2016,
identificador = 20)

#Econ. Mex.

M_Loc_Econ_Xmex_2007 <- mutate(M_Loc_Econ_Xmex_2007,
identificador = 21)

M_Loc_Econ_Xmex_2008 <- mutate(M_Loc_Econ_Xmex_2008,
identificador = 22)

M_Loc_Econ_Xmex_2009 <- mutate(M_Loc_Econ_Xmex_2009,
identificador = 23)

M_Loc_Econ_Xmex_2010 <- mutate(M_Loc_Econ_Xmex_2010,
identificador = 24)

M_Loc_Econ_Xmex_2011 <- mutate(M_Loc_Econ_Xmex_2011,
identificador = 25)

M_Loc_Econ_Xmex_2012 <- mutate(M_Loc_Econ_Xmex_2012,
identificador = 26)

M_Loc_Econ_Xmex_2013 <- mutate(M_Loc_Econ_Xmex_2013,
identificador = 27)

M_Loc_Econ_Xmex_2014 <- mutate(M_Loc_Econ_Xmex_2014,
identificador = 28)

M_Loc_Econ_Xmex_2015 <- mutate(M_Loc_Econ_Xmex_2015,
identificador = 29)

A_Loc_Envi_Xarg_2016 <- mutate(A_Loc_Envi_Xarg_2016,
identificador = 30)

#Envi Mex:

M_Loc_Envi_Xmex_2007 <- mutate(M_Loc_Envi_Xmex_2007,
identificador = 31)

M_Loc_Envi_Xmex_2008 <- mutate(M_Loc_Envi_Xmex_2008,
identificador = 32)

M_Loc_Envi_Xmex_2009 <- mutate(M_Loc_Envi_Xmex_2009,
identificador = 33)

M_Loc_Envi_Xmex_2010 <- mutate(M_Loc_Envi_Xmex_2010,
identificador = 34)

M_Loc_Envi_Xmex_2011 <- mutate(M_Loc_Envi_Xmex_2011,
identificador = 35)

M_Loc_Envi_Xmex_2012 <- mutate(M_Loc_Envi_Xmex_2012,
identificador = 36)

M_Loc_Envi_Xmex_2013 <- mutate(M_Loc_Envi_Xmex_2013,
identificador = 37)

M_Loc_Envi_Xmex_2014 <- mutate(M_Loc_Envi_Xmex_2014,
identificador = 38)

M_Loc_Envi_Xmex_2015 <- mutate(M_Loc_Envi_Xmex_2015,
identificador = 39)

A_Loc_Envi_Xarg_2016 <- mutate(A_Loc_Envi_Xarg_2016,
identificador = 40)

```

Las pego a todas:

```{r}
total <- bind_rows(A_Loc_Econ_Xarg_2007, A_Loc_Econ_Xarg_2008, A_Loc_Econ_Xarg_2009, A_Loc_Econ_Xarg_2010, A_Loc_Econ_Xarg_2011, A_Loc_Econ_Xarg_2012, A_Loc_Econ_Xarg_2013, A_Loc_Econ_Xarg_2014, A_Loc_Econ_Xarg_2015, A_Loc_Econ_Xarg_2016, A_Loc_Envi_Xarg_2007, A_Loc_Envi_Xarg_2008, A_Loc_Envi_Xarg_2009, A_Loc_Envi_Xarg_2010, A_Loc_Envi_Xarg_2011, A_Loc_Envi_Xarg_2012, A_Loc_Envi_Xarg_2013, A_Loc_Envi_Xarg_2014, A_Loc_Envi_Xarg_2015, A_Loc_Envi_Xarg_2016, M_Loc_Econ_Xmex_2007, M_Loc_Econ_Xmex_2008, M_Loc_Econ_Xmex_2009, M_Loc_Econ_Xmex_2010, M_Loc_Econ_Xmex_2011, M_Loc_Econ_Xmex_2012, M_Loc_Econ_Xmex_2013, M_Loc_Econ_Xmex_2014, M_Loc_Econ_Xmex_2015, M_Loc_Econ_Xmex_2016, M_Loc_Envi_Xmex_2007, M_Loc_Envi_Xmex_2008, M_Loc_Envi_Xmex_2009, M_Loc_Envi_Xmex_2010, M_Loc_Envi_Xmex_2011, M_Loc_Envi_Xmex_2012, M_Loc_Envi_Xmex_2013, M_Loc_Envi_Xmex_2014, M_Loc_Envi_Xmex_2015, M_Loc_Envi_Xmex_2016, .id = NULL)
```

La transformo en tibble:

```{r}
consolidada <- as_tibble(total)
```

Elimino las bases anteriores del environment:
```{r}
rm(r, total, A_Loc_Econ_Xarg_2007, A_Loc_Econ_Xarg_2008, A_Loc_Econ_Xarg_2009, A_Loc_Econ_Xarg_2010, A_Loc_Econ_Xarg_2011, A_Loc_Econ_Xarg_2012, A_Loc_Econ_Xarg_2013, A_Loc_Econ_Xarg_2014, A_Loc_Econ_Xarg_2015, A_Loc_Econ_Xarg_2016, A_Loc_Envi_Xarg_2007, A_Loc_Envi_Xarg_2008, A_Loc_Envi_Xarg_2009, A_Loc_Envi_Xarg_2010, A_Loc_Envi_Xarg_2011, A_Loc_Envi_Xarg_2012, A_Loc_Envi_Xarg_2013, A_Loc_Envi_Xarg_2014, A_Loc_Envi_Xarg_2015, A_Loc_Envi_Xarg_2016, M_Loc_Econ_Xmex_2007, M_Loc_Econ_Xmex_2008, M_Loc_Econ_Xmex_2009, M_Loc_Econ_Xmex_2010, M_Loc_Econ_Xmex_2011, M_Loc_Econ_Xmex_2012, M_Loc_Econ_Xmex_2013, M_Loc_Econ_Xmex_2014, M_Loc_Econ_Xmex_2015, M_Loc_Econ_Xmex_2016, M_Loc_Envi_Xmex_2007, M_Loc_Envi_Xmex_2008, M_Loc_Envi_Xmex_2009, M_Loc_Envi_Xmex_2010, M_Loc_Envi_Xmex_2011, M_Loc_Envi_Xmex_2012, M_Loc_Envi_Xmex_2013, M_Loc_Envi_Xmex_2014, M_Loc_Envi_Xmex_2015, M_Loc_Envi_Xmex_2016)
```

Veamos si hay duplicados:

```{r}
distinct(consolidada)
```
Se deduce de arriba que hay 11 duplicados

al parecer hay 702 duplicados, cuales son? Son estos de abajo, a algunos no los agarra distinct() por la variable identificador creada por mí.

```{r}
consolidada %>%        
group_by(AB) %>% 
filter(n()>1)
```
Está tomando como duplicados a los que tienen AB en blanco al parecer... pongo otra variable (AU)

```{r}
consolidada %>%        
group_by(TI, AU, DE, JI, AB, RP, UT) %>% 
filter(n()>1)
```

Detecta 232 duplicados...

#ACA PERDES VARIABLES!!!! SÓLO RETIENE LAS QUE ESPECIFICÁS! ESPECIFICÁ TODAS MENOS IDENTIFICADOR...
```{r}
consolidada <- distinct (consolidada, TI, AU, DE, JI, AB, RP, UT) 
```
Borró 116... en fin... me quedo con esto... ahora hay 11327

Repetimos:
```{r}
consolidada %>%        
group_by(TI, AU, DE, JI, AB, RP, UT) %>% 
filter(n()>1)
```

OK. LIsto.

##Análisis exploratorio:

¿Qué son las variables?

AU: autor

Ti: título

So, fuente (revista)

JI, titulo abreviado de la revista

DT: tipo de documento

DE descriptor, alabras claves autor?

ID: descriptor, alabras claves sistema?

Luego Claudia me la envía completa...


###Objetivos: 

1. Explorar un tema particular, ejemplo: Argentina y Mexico comparacion sobre temas de medio ambiente.

Hacia adentro, lo que los argentinos investigan sobre medioambiente, porque parece "Argentina" en el titulo o keyword). La produccion del país para solucionar los temas del país.

2. Usar LDA para clasificar artículos en los 4 cestos: Env. Arg; Env. Méx; Eco. Arg. y Eco. Méx.

Tal vez tendría que quedarme con el dataset y poner eval=false a todo lo de arriba, se queda sin RAM la PC... y sacar los de Economía...

```{r}
write_rds(consolidada, "C:/Users/User/Desktop/Seba/Datasets enraizados. No tocar ni mover/pict_sandra/consolidada_1.rds")

consolidada2 <- read_rds("C:/Users/User/Desktop/Seba/Datasets enraizados. No tocar ni mover/pict_sandra/consolidada_1.rds")
```

("C:/Users/User/Desktop/Seba/Datasets enraizados. No tocar ni mover/pict_sandra

#FIN-HASTA ACA


```{r}
library(tidytext)

consolidada1 <- consolidada %>%
unnest_tokens(autor, AU)
```



